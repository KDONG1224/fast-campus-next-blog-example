---
title: 'React01'
date: '2022-10-31'
---

## 왜 리액트를 쓰는가?

요즘 인기가 너무 많은 리액트.. 이제는 리액트를 할 수 없으면 프론트 개발자가 될 수 없는 세상이다. 대체 왜 그렇게 리액트를 쓰려고 하는걸까? 모든 개발이 그렇듯 시작은 불편함에 있다. 예전의 웹과 달리 요즘의 웹은 다양한 데이터를 실시간으로 통신하여 받아오고, 가공하여 사용자에게 보여진다. 특히 페이스북과 같은 SNS는 방대한 양의 데이터가 실시간으로 끊김없이 반영되어야 하기 때문에 대표적인 예가 된다. 하지만 기본적으로 웹은 단방향 통신이기 때문에, **실시간** 인 것 처럼 사용자에게 보여지기 위해서는 방대한 양의 데이터를 계속해서 요청하여 받아오는 작업을 해야 한다. 그럴때마다 웹브라우저는 변화된 부분을 보여주기 위해 끊임없이 렌더링을 하게 될 것이다. 여기서 **DOM의 렌더링**에 관련된 문제가 생기기 시작한다. <br><br>

## DOM render

여느 문서에서는 **DOM이 느리다**라는 표현을 하기도 한다. 하지만 이건 틀린 표현이고, **DOM 자체는 빠르다.** 문제는 **렌더링 과정**에 있다. javascript로 DOM을 조작하게 되면 DOM에 변화가 일어나기 때문에, 웹브라우저는 이 변화를 적용시기 위해서 처음부터 다시 페이지를 렌더링 하기 시작한다. HTML, CSS를 파싱하고 DOM tree와 CSSOM을 생성하고, Render tree를 구성하고, 레이아웃을 짠 후 페이팅하는 과정을 다시 하는 것이다. 처음부터 다시 처음부터 렌더링을 하는 이유는 변화 된 부분을 한번에 알 수가 없고, 가장 위에서부터 아래로 트리형식으로 내려오며 찾아가야 하기 때문이다. 결국 변화되는 부분은 일부인데, 변화되지 않는 부분까지 처음부터 다시 페인팅을 하는 과정 자체가 비효율적이며 프로젝트의 볼륨이 커질수록 렌더링이 많아질 수 밖에 없기 때문에 성능이 저하되는 것이다. 즉, 이때 페이지가 느려지게 되는 것이다.

### [참고]DOM render 과정

![image](https://user-images.githubusercontent.com/72537762/189018657-e72ddc23-7d18-47a4-98e0-b02b50f5b643.png)

## 🧐 위 문제점을 해결하는 리액트에 대한 이해

## 초기렌더링

위에서 언급한 성능 문제를 해결하기 위해 페이스북에서 개발한 것이 바로 리액트이다. 해결방법은 리액트가 렌더링하는 과정을 살펴보면 알 수 있다.<br><br>
사용자에게 뷰(view)를 보여주는 것을 **렌더링**이라고 하는데, 리액트에서 렌더링은 **render()** 함수가 있다.

```
	render() {...}
```

이 함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 하는데, 사용자에게 보여질 뷰가 어떻게 생겼고 어떻게 작동하는지에 대한 정보가 있는 **객체**를 반환다. <br><br>
render() => 문자열 형태의 HTML코드 => DOM에 적용 <br><br>
위 과정을 render 함수를 통해 거치면서 **초기 렌더링**을 하고, 최초에 사용자에게 보여줄 뷰를 제공해준다.

## 조화과정 - 리렌더링

최초의 뷰가 rener 함수로 렌더링이 되었고, 이후에는 데이터의 변화 혹은 사용자의 동작으로 컴포넌트가 변화 될 것이다. 이 변화된 컴포넌트를 리액트에서 감지하고, 변화한 컴포넌트를 리액트는 다시 렌더링을 하게 된다. 다시 말해서, 변화된 부분이 뷰 자체에서 변형이 되는 것이 아니라 아예 render 함수를 다시 호출하면서, 새로운 컴포넌트로 교체가 되는 것이다. 이때 Render 함수가 호출되어 반환되는 값은 바로 실제 DOM에 반영되는 것이 아니라, Virtual DOM이 먼저 만들어지게 된다.

## Virtual DOM - 변화된 부분만 교체하기

리액트에서는 Virtual DOM을 사용하여 변화된 부분만 감지해 해당 부분을 아예 새로 갈아끼우는 방식으로 구동이 된다. Virtual DOM은 말그대로 DOM을 추상화 한 것을 말한다. DOM에 변화가 생기면 리액트는 Virtual DOM을 새로 업데이트하고 이전의 Virtual DOM과 비교하여 변화 된 부분만 실제 DOM에 적용한다. 정리해보면 기존에는 변화된 부분을 렌더링 엔진이 하나씩 내려가며 찾아야 했지만, 그 찾는 과정을 Virtual DOM에서 대신 해주면서 기존보다 렌더링 리소스가 효율적으로 활용 되는 것이다. <br><br>
이 부분에서, 그럼 결국에는 두번 일하는 모양새가 되니 더 느린 것 아닌가 할 수 있지만 Virtual DOM은 실제 DOM 렌더링과 달리 많은 과정이 생략되어 있다. 그저 변화된 부분을 감지하는 것만이 목표이기 때문에, 실제로 레이아웃을 짜고 페인팅하는 과정이 없고 트리만 구성하게 되는 것이다. 그리고 실제로 렌더링과정을 거치는 것은 DOM이고, 변화되지 않는 부분은 다시 렌더링 되지 않으니 성능이 훨씬 최적화 되는 것이다.

### [참고]Virtual DOM 과정

![image](https://user-images.githubusercontent.com/72537762/189022233-78bdfc0f-7836-41df-a171-e891ae09f7d0.png)

이렇게만 보면 리액트로 만드는게 세상에서 가장 빨라보이지만, 데이터를 받아와야 할일이 거의 없는 정적인 페이지이거나 별다른 기능이 없는 프로젝트라면 리액트를 사용하지 않는 편이 더 빠르다. 무조건적인 신봉보다 적재적소에 잘 활용해야 더 좋은 개발을 할 수 있다.

## [참고] 리액트는 프레임워크가 아니라 라이브러리다!

많이 헷갈려하는 부분인 듯 한데, 리액트는 프레임워크가 아니다. <br><br>
<span style="color:orange;">**프레임워크**</span><br><br>
프레임워크는 주로 MVC, MVVM 등의 아키텍처로 애플리케이션을 구조화 환다. 이러한 구조들은 Model 과 view로 구성되는데, 모델에서는 데이터를 관리하고 있어서 사용자가 어떠한 동작을 함으로써 변화가 일어나면 컨트롤러를 통해 모델의 데이터를 변화시키고, 모델의 데이터를 바탕으로 뷰를 **변형** 시킨다.<br><br>
<span style="color:orange;">**리액트 라이브러리**</span><br><br>
프레임워크들과 구조적인 차이점으로는 데이터를 담고 있는 Model이 없고 오로지 view만을 신경쓴다. 그리고 기능적인 측면에서 프레임워크에서 ajax, 데이터 모델링, 라우팅과 같은 기능들이 내장되어 있지만 리액트에서는 이러한 기타 기능들은 직접 개발을 해야 한다. 하지만 이미 너무 많은 리액트 호환 라이브러리들이 많기 때문에 자유롭게 개발이 가능하다. 그리고 Backbone.js, Angular.js와도 혼용하여 사용 할 수 있다.

## [참고] 작업환경

리액트 프로젝트를 하기 위해서는 Node.js가 반드시 설치되어야 한다. Node.js를 설치하는 이유는 리액트 프로젝트를 개발할 때 필요한 도구들이 Node.js를 사용 하기 때문인데, 대표적으로 ES6를 호환시켜주는 바벨, 모듈화 된 코드를 파일로 생성해주고 웹 브라우저를 리로딩 하는 등의 기능을 지닌 웹팩 등이 있다.<br><br>

[참고서적] 리액트를 다루는 기술<br>